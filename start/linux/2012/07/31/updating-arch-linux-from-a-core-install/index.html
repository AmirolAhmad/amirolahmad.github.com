
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Updating Arch Linux from a Core Install</title>
  <meta name="description" content="easy, if you know how to do it...">
  <meta name="author" content="Carlos Alexandro Becker">

  <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/themes/twitter/css/body.css" rel="stylesheet">	
  <link href="/assets/themes/twitter/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
  <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
  <link href="/assets/themes/twitter/bootstrap/css/docs.css" rel="stylesheet">
  <script src="/assets/themes/twitter/js/jquery.min.js"></script>
</head>

<body data-spy="scroll" data-offset="50" data-target=".navbar-fixed-top">

<div class="navbar navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container">
			<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="brand" title="Home" href="/">caarlos0</a>
			<div class="nav-collapse collapse">
				<ul class="nav">
					
					
					


  
    
      
      	<li><a href="/about/index.html" title="About">About</a></li>
      
    
  
    
      
      	<li><a href="/archive.html" title="Archive">Archive</a></li>
      
    
  
    
      
    
  
    
      
      	<li><a href="/categories.html" title="Categories">Categories</a></li>
      
    
  
    
  
    
      
      	<li><a href="/pages.html" title="Pages">Pages</a></li>
      
    
  
    
      
    
  
    
      
      	<li><a href="/tags.html" title="Tags">Tags</a></li>
      
    
  




				</ul>
				<ul class="nav pull-right">
					<li><a href="/atom.xml" title="Atom Feed"><i class="icon-signal"></i> Feed</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>


  
<header class="jumbotron subhead" id="overview">
  <div class="container">
    <h1>Updating Arch Linux from a Core Install</h1>
    <p class="lead">easy, if you know how to do it...</p>
    <h6>
      Published
      
      
      tagged with 


  
     
    	<a href="/tags.html#archlinux-ref" rel="tooltip" title="see all posts about archlinux"><span class="label label-info">archlinux <span class="tag">3</span></span></a>
    
  



       
      at 31 July 2012
    </h6>
  </div>
</header>
<p />
<div class="container">
  
  <p>Recently I tried to made a fresh archlinux installation, with my old iso (don&#8217;t remember exactly what version is)&#8230; Yo, first, I instaled it with the local mirror only, without any update. The installation was ok, I rebooted, then try to update, using the arch linux home help about the <em>/lib turn into a symlink to /usr/lib</em>. <strong>Sweet</strong> mistake. That crap just dont work.</p>

<p>In last times, we have a lot of big arch linux changes:</p>

<ul>
<li><a href='http://www.archlinux.org/news/changes-to-rcconf-and-crypttab/'>changes in rc.conf and crypttab</a></li>

<li><a href='http://www.archlinux.org/news/grub-legacy-no-longer-supported/'>grub legacy no longer supported</a></li>

<li><a href='http://www.archlinux.org/news/the-lib-directory-becomes-a-symlink/'>/lib becomes a symlink</a></li>

<li><a href='http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required-1/'>filesystem upgrade that needs manual intervention</a></li>

<li><a href='http://www.archlinux.org/news/having-pacman-verify-packages/'>pacman-key</a></li>
</ul>

<p>All these itens have man pages helping you to pass throug the most errors&#8230; but, the lib symlink made a lot of people angry <strong>never use the force (-f) in pacman, NEVER</strong>.</p>

<p>So, I tried to reinstall, but, this time, using the remote mirrors (getting all the new packages), and it was ok, until the bootloader install part. Seem like the installer lost the GRUB config file somewhere&#8230;</p>

<p>Then, I do my research, and found a <a href='http://allanmcrae.com/2012/07/updating-arch-linux-from-a-core-install/'>very helpful article by Allan McRae</a>. I will just &#8220;rewrite&#8221; it here with some througt, but you can also read the original if you want.</p>

<p>Remember, if you get the <a href='http://www.archlinux.org/download/'>new ISO from arch linux site</a>, everything gonna be ok without any hacks.</p>

<p>So, after arch installed and loaded, do the following commands:</p>

<pre><code>$ pacman -Sy
$ rm -rf /var/run /var/lock &amp;&amp; pacman -Sf filesystem</code></pre>

<p><strong>Reboot.</strong></p>

<pre><code>$ pacman -S tzdata
$ pacman -U http://pkgbuild.com/~allan/glibc-2.16.0-1-i686.pkg.tar.xz
$ rm /etc/profile.d/locale.sh</code></pre>

<p>In this next accept, when promped to update pacman, say <strong>NO</strong>, and, when promped to any replacement, say <strong>YES</strong>.</p>

<pre><code>$ pacman -Su --ignore glibc
$ pacman -Su</code></pre>

<p><strong>Reboot</strong> again.</p>

<p>So, at this point, everything should work like a boss. See ya.</p>

  

  <hr class="soften">
  <h2>Related Posts</h2>
    
      <a href="/linux/2012/08/02/linux-and-mtp-just-a-hell">Linux and MTP: Just a hell</a><br />
    
      <a href="/linux/2012/07/27/how-to-enable-kms-on-i915-graphiccard-archlinux">How to enable KMS on i915 GraphicCard (archlinux)</a><br />
    
  </hr>


  <hr class="soften">

  <div class="well row-fluid">
    <ul class="thumbnails">
      <li class="span2 avatar-span2" >
	<a href="/about" class="thumbnail" rel="tooltip" title="see more info...">
	  <img src="http://www.gravatar.com/avatar/7ef3cd04888c6d17f34d43e29ec3d46f?rating=PG&amp;size=150" alt="Avatar">
	</a>
      </li>
      <li class="span10">
	<h2>About the Author</h2>
	<br />
	<p>
	  <a href="/about" title="see more info">Carlos</a> works in a <a href="http://www.ciphersec.com.br/"> security information company</a>, coding mostly Java (2+ years exp). 
	  He also worked in a lot of other projects using GWT, JSF, and others.
	  Like to pass some hours hacking around Maven and having ideas of cool and helpfull thing to code, but, have no much time to do this...
	  Creator, Architect and developer of <a title="see the demo!" href="http://gwtbootstrap.github.com">GWT-Bootstrap</a> Project. 
	  At the moment, studying Ruby and Ruby on Rails. 
	  He's also Linux and Android user.
	</p>
      </li>
    </ul>
  </div>

  <div class="pagination">
    <ul>
      
	<li class="prev"><a href="/linux/2012/07/27/how-to-enable-kms-on-i915-graphiccard-archlinux" title="How to enable KMS on i915 GraphicCard (archlinux)">&larr; Previous</a></li>
      
	<li><a href="/archive.html">Archive</a></li>
      
	<li class="next"><a href="/ide/2012/08/01/improving-vim-and-gedit" title="Improving Vim and Gedit">Next &rarr;</a></li>
      
    </ul>
  </div>

  <hr class="soften">

  <!-- AddThis Button BEGIN -->
  <div class="addthis_toolbox addthis_default_style ">
    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    <a class="addthis_counter addthis_pill_style"></a>
  </div>

  <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=caarlos0"></script>
  <!-- AddThis Button END -->

  <hr class="soften" />

  


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'caarlos0blog'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




</div> <!-- /container --> 


<style type="text/css">body{padding-top: 30px; }</style>

  
  <footer class="footer">
    <div class="container">
		  <p class="pull-right"><a href="#" onclick="$('html, body').animate({scrollTop: $('body').offset().top }, 2000);">Back to top</a></p>
		  <p>
		    All posts are written by <a href="/about">Carlos Alexandro Becker</a>
		    and are licenced under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>
		  </p>
		  <p>
		    Thanks to <a href="http://jekyllbootstrap.com" target="_blank" rel="tooltip" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a> and 
		    <a href="http://twitter.github.com/bootstrap/" target="_blank" rel="tooltip" title="Simple and flexible HTML, CSS, and Javascript for popular user interface components and interactions.">Twitter Bootstrap</a>
		  </p>
		  <h4>Blogroll</h4>
		  <ul class="footer-links">
		    <li><a href="http://www.carlos.inf.br/">Carlos Cabelo</a></li>
		    <li><a href="http://byfat.xxx/">By Fat</a></li>
		    <li><a href="http://blog.getbootstrap.com/">Twitter Bootstrap</a></li>
		  </ul>
    </div>
  </footer>

  

  <script src="/assets/themes/twitter/bootstrap/js/bootstrap.min.js"></script>
  <script>
    $('.content a[title]').each(function(){ $(this).attr('rel', 'tooltip'); });
    $('.navbar a[title]').each(function(){$(this).attr('rel', 'tooltip'); $(this).attr('data-placement', 'bottom');});
    $('[rel=tooltip]').tooltip();
  </script>
</body>
</html>

